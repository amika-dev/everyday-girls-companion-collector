@model EverydayGirlsCompanionCollector.Models.ViewModels.FriendProfileViewModel
@{
    ViewData["Title"] = $"{Model.DisplayName}'s Profile";
}

<div class="profile-container friend-profile-container">

    <!-- Profile Card -->
    <div class="eg-card eg-card--warm mb-4">
        <div class="row align-items-center g-4">
            <!-- Avatar: partner portrait or letter fallback -->
            <div class="col-12 col-md-auto text-center">
                @if (!string.IsNullOrEmpty(Model.PartnerImagePath))
                {
                    <img src="@Model.PartnerImagePath"
                         alt="@Model.PartnerName"
                         class="profile-avatar-image eg-portrait-ring girl-image-square" />
                }
                else
                {
                    <div class="profile-avatar-placeholder">
                        <span class="profile-avatar-initial">@(Model.DisplayName.Length > 0 ? Model.DisplayName[0].ToString().ToUpper() : "?")</span>
                    </div>
                }
            </div>

            <!-- Profile details -->
            <div class="col-12 col-md">
                <div class="eg-rhythm-md">
                    <!-- Display Name (read-only) -->
                    <div class="text-center text-md-start">
                        <h3 class="eg-hero-name mb-0">@Model.DisplayName</h3>
                    </div>

                    <!-- Partner info block -->
                    @if (Model.PartnerName != null)
                    {
                        <div class="profile-partner-block">
                            <div class="eg-subtitle">Together With</div>
                            <strong class="profile-partner-name">@Model.PartnerName</strong>
                            <div class="eg-stat-list">
                                <div class="eg-stat-row">
                                    <span class="eg-stat-label">üìÖ First Met</span>
                                    <span class="eg-stat-value">@Model.PartnerFirstMetUtc?.ToString("yyyy-MM-dd")</span>
                                </div>
                                <div class="eg-stat-row">
                                    <span class="eg-stat-label">üå± Days Together</span>
                                    <span class="eg-stat-value">@Model.PartnerDaysTogether</span>
                                </div>
                                <div class="eg-stat-row">
                                    <span class="eg-stat-label">‚òÅÔ∏è Personality</span>
                                    <span class="eg-stat-value">@Model.PartnerPersonalityTag</span>
                                </div>
                                <div class="eg-stat-row">
                                    <span class="eg-stat-label">üíñ Bond</span>
                                    <span class="eg-stat-value">@Model.PartnerBond</span>
                                </div>
                            </div>
                        </div>
                    }
                    else
                    {
                        <div class="profile-partner-block">
                            <div class="eg-subtitle">Together With</div>
                            <p class="text-muted mb-0" style="font-size: 0.95rem;">No partner yet.</p>
                        </div>
                    }

                    <!-- Account summary -->
                    <div class="profile-account-summary">
                        <div class="profile-section-label">Account Summary</div>
                        <div class="eg-stat-list">
                            <div class="eg-stat-row">
                                <span class="profile-stat-label">üå∏ Companions</span>
                                <span class="profile-stat-value">@Model.CompanionsCount</span>
                            </div>
                            <div class="eg-stat-row">
                                <span class="profile-stat-label">‚ù§Ô∏è Total Bond</span>
                                <span class="profile-stat-value">@Model.TotalBond</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation Links -->
    <div class="friend-actions">
        <a href="/Friends/@Model.FriendUserId/Collection" class="btn btn-info btn-lg">View Collection</a>
        <a asp-controller="Friends" asp-action="Index" class="btn btn-outline-secondary btn-lg">Back to Friends</a>
    </div>
</div>
