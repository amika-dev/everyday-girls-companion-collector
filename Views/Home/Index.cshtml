@model EverydayGirlsCompanionCollector.Models.ViewModels.MainMenuViewModel
@{
    ViewData["Title"] = "Main Menu";
}

<div class="main-menu-container">
    <h1 class="text-center mb-4">Main Menu</h1>

    <!-- Countdown to Reset -->
    <div class="countdown-panel text-center mb-4">
        <div class="eg-subtitle" style="margin-bottom: 12px;">Next Reset In</div>
        <p class="countdown-timer">
            <strong data-countdown-seconds="@((int)Model.TimeUntilReset.TotalSeconds)"></strong>
        </p>
        <small class="text-muted">Daily reset at 18:00 UTC</small>
    </div>

    <!-- Daily Status Indicators -->
    <div class="daily-status-grid mb-4">
        <div class="status-card">
            <h5 class="status-card-title">Daily Roll</h5>
            <span class="badge @(Model.IsDailyRollAvailable ? "badge-available" : "badge-used")">
                @(Model.IsDailyRollAvailable ? "Available" : "Used")
            </span>
        </div>
        <div class="status-card">
            <h5 class="status-card-title">Daily Adopt</h5>
            <span class="badge @(Model.IsDailyAdoptAvailable ? "badge-available" : "badge-used")">
                @(Model.IsDailyAdoptAvailable ? "Available" : "Used")
            </span>
        </div>
        <div class="status-card">
            <h5 class="status-card-title">Daily Interaction</h5>
            <span class="badge @(Model.IsDailyInteractionAvailable ? "badge-available" : "badge-used")">
                @(Model.IsDailyInteractionAvailable ? "Available" : "Used")
            </span>
        </div>
    </div>

    <!-- Partner Panel -->
    @if (Model.Partner != null)
    {
        <div class="eg-card eg-card--warm mb-4">
            <div class="row align-items-center g-4">
                <div class="col-12 col-md-auto text-center">
                    <img src="@Model.Partner.ImageUrl" alt="@Model.Partner.Name" class="eg-portrait-ring girl-image-square" style="width: 160px; height: 160px; object-fit: cover;" />
                </div>
                <div class="col-12 col-md">
                    <div class="eg-rhythm-md">
                        <div class="text-center text-md-start">
                            <div class="eg-subtitle">Together With</div>
                            <h3 class="eg-hero-name">@Model.Partner.Name</h3>
                        </div>
                        <div class="eg-stat-list">
                            <div class="eg-stat-row">
                                <span class="eg-stat-label">📅 First Met</span>
                                <span class="eg-stat-value">@Model.PartnerDateMet?.ToString("yyyy-MM-dd")</span>
                            </div>
                            <div class="eg-stat-row">
                                <span class="eg-stat-label">🌱 Days Together</span>
                                <span class="eg-stat-value">@Model.PartnerDaysSinceAdoption</span>
                            </div>
                            <div class="eg-stat-row">
                                <span class="eg-stat-label">☁️ Personality</span>
                                <span class="eg-stat-value">@Model.PartnerTag</span>
                            </div>
                            <div class="eg-stat-row">
                                <span class="eg-stat-label">♥ Bond</span>
                                <span class="eg-stat-value">@Model.PartnerBond</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
    else
    {
        <div class="eg-card eg-card--warm mb-4">
            <div class="text-center eg-rhythm-sm">
                <div class="eg-subtitle">Together With</div>
                <p class="text-muted mb-0">No companion yet. Your first adoption will begin your journey together.</p>
            </div>
        </div>
    }

    <!-- Navigation Buttons -->
    <div class="navigation-buttons">
        <a asp-controller="DailyAdopt" asp-action="Index" class="btn btn-primary btn-lg">Daily Adopt</a>
        
        @if (Model.Partner != null)
        {
            <a asp-controller="Interaction" asp-action="Index" class="btn btn-secondary btn-lg">Interact</a>
        }
        else
        {
            <button class="btn btn-secondary btn-lg" disabled title="Adopt a partner first">Interact</button>
        }
        
        
        <a asp-controller="Collection" asp-action="Index" class="btn btn-info btn-lg">Collection</a>
    </div>
</div>


